jQuery(function(b){function u(c,d){d||(d=window.location.href);c=c.replace(/[\[\]]/g,"\\$&");return(c=(new RegExp("[?&]"+c+"(=([^&#]*)|&|#|$)")).exec(d))?c[2]?decodeURIComponent(c[2].replace(/\+/g," ")):"":null}function v(c){c.removeClass("ai-ip-data");var d=!1;if(""!=ai_ip_data){try{var k=JSON.parse(ai_ip_data),f=k[0],l=k[1],m=k[2],n=k[3]}catch(e){return}var q=!1;-1!=f.indexOf("#")&&(q=!0,f=f.replace("#",""));var p="";q&&(p="CFP BLOCKED, ");p=p+f+", "+l;null!=m&&null!=n&&(p=p+":"+m+":"+n);null==
m&&(m="");null==n&&(n="");null!=k&&c.each(function(){var e=b(this).closest("div.AI_FUNCT_GET_BLOCK_CLASS_NAME");d=!0;var g=b(this).attr("ip-addresses");if("undefined"!=typeof g){g=g.split(",");var r=b(this).attr("ip-address-list"),h=!1;b.each(g,function(t,a){if("*"==a.charAt(0))if("*"==a.charAt(a.length-1)){if(a=a.substr(1,a.length-2),-1!=f.indexOf(a))return h=!0,!1}else{if(a=a.substr(1),f.substr(-a.length)==a)return h=!0,!1}else if("*"==a.charAt(a.length-1)){if(a=a.substr(0,a.length-1),0==f.indexOf(a))return h=
!0,!1}else if("#"==a){if(""==f)return h=!0,!1}else if("CFP"==a.toUpperCase()){if(q)return h=!0,!1}else if(a==f)return h=!0,!1});switch(r){case "B":h&&(d=!1);break;case "W":h||(d=!1)}}if(d&&(g=b(this).attr("countries"),"undefined"!=typeof g))switch(g=g.split(","),r=b(this).attr("country-list"),h=!1,b.each(g,function(t,a){a=a.trim().split(":");if(null==a[1]||""==m)a[1]="";if(null==a[2]||""==n)a[2]="";t=a.join(":").toUpperCase();a=(l+":"+(""==a[1]?"":m)+":"+(""==a[2]?"":n)).toUpperCase();if(t==a)return h=
!0,!1}),r){case "B":h&&(d=!1);break;case "W":h||(d=!1)}b(this).css({visibility:"",position:"",width:"",height:"","z-index":""});g=b(this).prev(".ai-debug-bar");g.find(".ai-debug-name.ai-ip-country").text(p);g.find(".ai-debug-name.ai-ip-status").text(d?ai_front.visible:ai_front.hidden);d?(e.css({visibility:""}),e.hasClass("ai-remove-position")&&e.css({position:""}),"undefined"!=typeof b(this).data("code")&&(g=b64d(b(this).data("code")),0!=b(this).closest("head").length?(b(this).after(g),b(this).remove()):
b(this).append(g),b(this).attr("data-code",""),ai_process_element(this))):(b(this).hide(),e.length&&(e.removeAttr("data-ai").removeClass("ai-track"),e.find(".ai-debug-block").length?(e.css({visibility:""}).removeClass("ai-close"),e.hasClass("ai-remove-position")&&e.css({position:""}),"undefined"!=typeof b(this).data("code")&&(e.removeClass("ai-list-block"),e.removeClass("ai-list-block-filter"),e.prev().hasClass("ai-debug-info")&&e.prev().remove())):e[0].hasAttribute("style")&&-1==e.attr("style").indexOf("height:")&&
e.hide()));e.removeClass("ai-list-block-ip")})}}ai_process_ip_addresses=function(c){c=null==c?b("div.ai-ip-data, meta.ai-ip-data"):b(c).filter(".ai-ip-data");if(c.length)if("undefined"!=typeof ai_ip_data)v(c);else if("undefined"==typeof ai_ip_data_requested){ai_ip_data_requested=!0;var d="AI_SITE_URL/wp-admin/admin-ajax.php?action=ai_ajax&ip-data=ip-address-country-city",k=u("ai-debug-ip-address");null!=k&&(d+="&ai-debug-ip-address="+k);k=u("ai-debug-country");null!=k&&(d+="&ai-debug-country="+k);
b.ajax({url:d,type:"post",data:{ai_check:"AI_NONCE",ai_version:(new Date).getTime()+"-"+Math.round(1E5*Math.random())},async:!0}).done(function(f){ai_ip_data=f;if(""==f){var l="Ajax request returned empty data, geo-targeting disabled";console.error(l);"undefined"!=typeof ai_js_errors&&ai_js_errors.push([l,d,0])}else try{JSON.parse(f)}catch(m){l="Ajax call returned invalid data, geo-targeting disabled",console.error(l,f),"undefined"!=typeof ai_js_errors&&ai_js_errors.push([l,d,0])}c=b("div.ai-ip-data, meta.ai-ip-data");
c.length&&v(c)}).fail(function(f,l,m){b("div.ai-ip-data").each(function(){b(this).css({display:"none",visibility:"",position:"",width:"",height:"","z-index":""}).removeClass("ai-ip-data").hide()})})}};b(document).ready(function(c){setTimeout(function(){ai_process_ip_addresses()},5)})});
function ai_process_element(b){setTimeout(function(){"function"==typeof ai_process_rotations_in_element&&ai_process_rotations_in_element(b);"function"==typeof ai_process_lists&&ai_process_lists(jQuery(".ai-list-data",b));"function"==typeof ai_process_ip_addresses&&ai_process_ip_addresses(jQuery(".ai-ip-data",b));"function"==typeof ai_process_filter_hooks&&ai_process_filter_hooks(jQuery(".ai-filter-check",b));"function"==typeof ai_adb_process_blocks&&ai_adb_process_blocks(b);"function"==typeof ai_process_impressions&&
1==ai_tracking_finished&&ai_process_impressions();"function"==typeof ai_install_click_trackers&&1==ai_tracking_finished&&ai_install_click_trackers();"function"==typeof ai_install_close_buttons&&ai_install_close_buttons(document)},5)};
